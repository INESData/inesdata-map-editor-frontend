<a class="btn btn__secondary back mb-2" routerLink="/mappings">{{ "mappings.mapping.mappings-list" | translate }}</a>
<div class="grid">
	<div class="col-8">
		<div class="whiteContainer pb-0">
			<div class="grid">
				<!-- Subject-->
				<div class="col-12">
					<div class="col-12 flex flex-justify-right pt-0 pb-0">
						<p-button class="btn btn__primary icon-chevron" [label]="'labels.new-triplesmap' | translate" (onClick)="addOutput()" />
					</div>
					<!-- Data Sources-->
					<h1 class="category category__datasources">{{ "data-sources.data-source.sources" | translate }}</h1>
					<p-dropdown
						[options]="formats"
						[(ngModel)]="selectedFormat"
						[placeholder]="'data-sources.data-source.format' | translate"
						(onChange)="getDataFromFormat($event.value)"
					></p-dropdown>
					<div class="col-12 flex flex-justify-center pt-0 pb-0">
						<h1 class="category">{{ "mappings.mapping.subject" | translate }}</h1>
					</div>
					<div class="grid mt-0">
						<div *ngIf="selectedFormat" class="col-4">
							<p class="mt-1 mb-0">{{ "data-sources.data-source.data" | translate }}</p>
							<div class="mappingCategory">
								<div class="flex flex-column gap-3">
									<div class="searcherContainer">
										<input class="searcher" [placeholder]="'placeholders.search' | translate" type="text" pInputText />
									</div>
									<div *ngFor="let dataSource of dataSources" class="field-checkbox">
										<p-radioButton
											[inputId]="dataSource.id"
											name="category"
											[value]="dataSource"
											[(ngModel)]="selectedSource"
											(ngModelChange)="onSourceSelected($event)"
										/>
										<label [for]="dataSource.id" class="ml-2">
											{{ dataSource.name }}
										</label>
									</div>
									<p-button (onClick)="showDialogQuery()" class="addButton addButton__query" [label]="'labels.add-query' | translate" />
								</div>
							</div>
						</div>
						<!-- Subject ontologies list-->
						<div class="col-4">
							<p class="mt-1 mb-0">{{ "ontologies.ontologies" | translate }}</p>
							<div class="mappingCategory">
								<div class="flex flex-column gap-3">
									<div class="searcherContainer">
										<input class="searcher" [placeholder]="'placeholders.search' | translate" type="text" pInputText />
									</div>
									<div *ngFor="let ontology of ontologies" class="field-checkbox">
										<p-radioButton
											[inputId]="ontology.id"
											name="ontology"
											[value]="ontology"
											[(ngModel)]="selectedObjectOntology"
											(ngModelChange)="onOntologySelect($event, 'subject')"
										/>
										<label [for]="ontology.id" class="ml-2">
											{{ ontology.name }}
										</label>
									</div>
								</div>
							</div>
							<p class="mt-1 mb-0">Iterador</p>
							<input class="mb-1" type="text" pInputText />
							<p class="mt-1 mb-0">Template URL</p>
							<input class="mb-1" type="text" pInputText />
						</div>
						<!-- Subject ontologies classes-->
						<div *ngIf="selectedObjectOntology" class="col-4">
							<p class="mt-1 mb-0">{{ "ontologies.ontology.classes" | translate }}</p>
							<div class="mappingCategory">
								<div class="flex flex-column gap-3">
									<div class="searcherContainer">
										<input class="searcher" [placeholder]="'placeholders.search' | translate" type="text" pInputText />
									</div>
									<div *ngFor="let subjectClass of subjectClasses" class="field-checkbox">
										<p-radioButton [inputId]="subjectClass" name="subjectClass" [value]="subjectClass" [(ngModel)]="selectedObjectClass" />
										<label [for]="subjectClass" class="ml-2">
											{{ subjectClass }}
										</label>
									</div>
								</div>
								<p-button (onClick)="showDialogElement()" class="addButton addButton__plus" [label]="'labels.add-element' | translate" />
							</div>
						</div>
					</div>
				</div>
				<!-- End of Subject-->
				<div class="col-12 flex flex-justify-right pt-0 pb-0">
					<p-button class="btn btn__primary icon-chevron" [label]="'labels.add-rule' | translate" (onClick)="addOutput()" />
				</div>
				<!-- Predicate-->
				<div class="col-12">
					<h1 class="category">{{ "mappings.mapping.predicate" | translate }}</h1>
					<div class="grid mt-0">
						<!-- Predicate ontologies list-->
						<div class="col-4">
							<p class="mt-1 mb-0">{{ "ontologies.ontologies" | translate }}</p>
							<div class="mappingCategory">
								<div class="flex flex-column gap-3">
									<div class="searcherContainer">
										<input class="searcher" [placeholder]="'placeholders.search' | translate" type="text" pInputText />
									</div>
									<div *ngFor="let ontology of ontologies" class="field-checkbox">
										<p-radioButton
											[inputId]="ontology.id"
											name="ontology"
											[value]="ontology"
											[(ngModel)]="selectedPredicateOntology"
											(ngModelChange)="onOntologySelect($event, 'predicate')"
										/>
										<label [for]="ontology.id" class="ml-2">
											{{ ontology.name }}
										</label>
									</div>
								</div>
							</div>
						</div>
						<!-- Predicate ontologies classes-->
						<div *ngIf="selectedPredicateOntology" class="col-4">
							<p class="mt-1 mb-0">{{ "ontologies.ontology.classes" | translate }}</p>
							<div class="mappingCategory">
								<div class="flex flex-column gap-3">
									<div class="searcherContainer">
										<input class="searcher" [placeholder]="'placeholders.search' | translate" type="text" pInputText />
									</div>
									<div *ngFor="let predicateClass of predicateClasses" class="field-checkbox">
										<p-radioButton
											[inputId]="predicateClass"
											name="predicateClass"
											[value]="predicateClass"
											[(ngModel)]="selectedPredicateClass"
											(ngModelChange)="onClassSelect($event)"
										/>
										<label [for]="predicateClass" class="ml-2">
											{{ predicateClass }}
										</label>
									</div>
								</div>
								<p-button (onClick)="showDialogElement()" class="addButton addButton__plus" [label]="'labels.add-element' | translate" />
							</div>
						</div>
						<!-- Predicate ontologies properties-->
						<div *ngIf="selectedPredicateClass && properties && properties.length > 0" class="col-4">
							<p class="mt-1 mb-0">{{ "ontologies.ontology.properties" | translate }}</p>
							<div class="mappingCategory">
								<div class="flex flex-column gap-3">
									<div class="searcherContainer">
										<input class="searcher" [placeholder]="'placeholders.search' | translate" type="text" pInputText />
									</div>
									<div *ngFor="let property of properties" class="field-checkbox">
										<p-radioButton [inputId]="property.name" name="property" [value]="property" [(ngModel)]="selectedProperty" />
										<label [for]="property.name" class="ml-2">
											{{ property.name }}
											<ng-container *ngFor="let icon of getIconAndTitle(property).iconClasses; let i = index">
												<i class="property-icon ml-1" [ngClass]="icon" [title]="getIconAndTitle(property).titles[i]"></i>
											</ng-container>
										</label>
									</div>
								</div>
								<p-button (onClick)="showDialogElement()" class="addButton addButton__plus" [label]="'labels.add-element' | translate" />
							</div>
						</div>
					</div>
				</div>
				<!-- End of Predicate-->
				<!-- Object-->
				<div class="col-12">
					<h1 class="category">{{ "mappings.mapping.object" | translate }}</h1>
					<div class="grid mt-0">
						<div class="col-4">
							<input class="mb-1" type="text" pInputText />
						</div>
						<div class="col-4">
							<div class="button-group" style="display: flex; gap: 10px">
								<p-button
									class="btn btn__primary"
									[label]="'labels.iri' | translate"
									[styleClass]="termType === 'iri' ? 'p-button-primary' : 'p-button-secondary'"
									(onClick)="setTermType('iri')"
								/>
								<p-button
									class="btn btn__primary"
									[label]="'labels.literal' | translate"
									[styleClass]="termType === 'literal' ? 'p-button-primary' : 'p-button-secondary'"
									(onClick)="setTermType('literal')"
								/>
							</div>
						</div>
						<div class="col-4">
							<p-dropdown [options]="dataTypes" [(ngModel)]="selectedType" [placeholder]="'placeholders.dataType' | translate"></p-dropdown>
						</div>
					</div>
				</div>
				<!-- End of object-->
			</div>
		</div>
	</div>
	<!--Mappings summary-->
	<app-mappings-summary></app-mappings-summary>
</div>

<!--Add element dialog-->
<p-dialog
	[header]="'labels.add-element' | translate"
	[modal]="true"
	[draggable]="false"
	[(visible)]="elementDialogVisible"
	[style]="{ width: '40rem' }"
>
	<label for="">{{ "labels.name" | translate }}</label>
	<input class="mb-4" type="text" pInputText />
	<div class="flex flex-justify-right w-full">
		<p-button class="btn btn__primary" [label]="'labels.add-element' | translate" type="button" />
	</div>
</p-dialog>

<!--Add query dialog-->
<p-dialog
	[header]="'labels.add-query' | translate"
	[modal]="true"
	[draggable]="false"
	[(visible)]="queryDialogVisible"
	[style]="{ width: '40rem' }"
>
	<label for="">{{ "labels.name" | translate }}</label>
	<input class="mb-2" type="text" pInputText />
	<label for="">{{ "labels.query" | translate }}</label>
	<textarea class="textHighlight mb-4"></textarea>
	<div class="flex flex-justify-right w-full">
		<p-button class="btn btn__primary" [label]="'labels.add-query' | translate" type="button" />
	</div>
</p-dialog>
